<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- font awesome cdn -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="./css/styles.css" />
    <title>Ondo State Ministry of Information | Admin Dashboard</title>
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
  </head>
  <body class="grey-body dashboard-body">
    <aside class="show-sidebar">
      <div>
        <img src="./images/moi-logo.png" alt="moi logo" class="moi-logo" />
      </div>

      <div class="links-container mt-3">
        <div>
          <a href="#">
            <i class="fa-solid fa-bars"></i>
            <span>Dashboard</span>
          </a>
        </div>
        <div class="active">
          <a href="#">
            <i class="fa-regular fa-newspaper"></i>
            <span>posts</span>
          </a>
        </div>
        <div>
          <a href="#">
            <i class="fa-solid fa-database"></i>
            <span>statistics</span>
          </a>
        </div>
        <div>
          <a href="#">
            <i class="fa-solid fa-gears"></i>
            <span>settings</span>
          </a>
        </div>
        <div>
          <a href="#">
            <i class="fa-solid fa-arrow-right-from-bracket"></i>
            <span>logout</span>
          </a>
        </div>
        <section class="write-new-post-container mt-5">
          <img src="./images/creative-write.png" alt="creative image" />
          <a href="./dashboard-new-post.html" class="btn">Write New Post</a>
        </section>
      </div>
    </aside>

    <main>
      <section class="d-search-form-container">
        <form action="#">
          <input
            type="search"
            placeholder="Search Here"
            class="d-search-form-input"
          />
          <button>
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
        <div>
          <i class="fa-regular fa-bell pr-1"></i>
          Hello,
          <span class="pr-2">&nbsp; Olu</span>
          <img
            src="./images/mark.jpg"
            alt="person profile"
            class="person-profile"
          />
        </div>
      </section>

      <section class="breadcrum">
        <h1>
          Post
          <span>></span>
          <small>all post</small>
        </h1>
      </section>

      <div>
        <a href="./dashboard-new-post.html" class="btn">Add New Post</a>
      </div>
      <section class="all-posts-section-container">
        <!-- <article class="admin-article">
          <div>
            <img src="./images/Gov-Akeredolu.jpg" alt="post image" />
          </div>
          <div>
            <h2>9 Non-dated shorts ourfits fashion people are wearing</h2>
            <p>
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptas
              vero tempore incidunt fugiat provident voluptatum ea sequi,
              dolorem nobis quibusdam porro recusandae culpa. Totam eos maxime
              beatae nemo distinctio minus.
            </p>
            <small>10 hours ago</small>
          </div>
          <div class="flex mr-5">
            <div class="action-container mr-1">
              <a href="#">
                <i class="fa-regular fa-pen-to-square"></i>
                <span>Edit</span>
              </a>
            </div>
            <div class="action-container">
              <a href="#">
                <i class="fa-solid fa-trash-can"></i>
                <span>Delete</span>
              </a>
            </div>
          </div>
        </article> -->

        <!--
        <article class="admin-article">
          <div>
            <img src="./images/commissioner-bamidele.jpg" alt="post image" />
          </div>
          <div>
            <h2>9 Non-dated shorts ourfits fashion people are wearing</h2>
            <p>
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptas
              vero tempore incidunt fugiat provident voluptatum ea sequi,
              dolorem nobis quibusdam porro recusandae culpa. Totam eos maxime
              beatae nemo distinctio minus.
            </p>
            <small>10 hours ago</small>
          </div>
          <div class="flex mr-5">
            <div class="action-container mr-1">
              <a href="#">
                <i class="fa-regular fa-pen-to-square"></i>
                <span>Edit</span>
              </a>
            </div>
            <div class="action-container">
              <a href="#">
                <i class="fa-solid fa-trash-can"></i>
                <span>Delete</span>
              </a>
            </div>
          </div>
        </article>
        <article class="admin-article">
          <div>
            <img src="./images/Oluwarotimi-Akeredolu.png" alt="post image" />
          </div>
          <div>
            <h2>9 Non-dated shorts ourfits fashion people are wearing</h2>
            <p>
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptas
              vero tempore incidunt fugiat provident voluptatum ea sequi,
              dolorem nobis quibusdam porro recusandae culpa. Totam eos maxime
              beatae nemo distinctio minus.
            </p>
            <small>10 hours ago</small>
          </div>
          <div class="flex mr-5">
            <div class="action-container mr-1">
              <a href="#">
                <i class="fa-regular fa-pen-to-square"></i>
                <span>Edit</span>
              </a>
            </div>
            <div class="action-container">
              <a href="#">
                <i class="fa-solid fa-trash-can"></i>
                <span>Delete</span>
              </a>
            </div>
          </div>
        </article>
        -->
      </section>
    </main>

    <script type="text/javascript">
      // location.reload(true);
      const postsContainer = document.querySelector(
        ".all-posts-section-container"
      );

      let formdata = new FormData();
      let requestOptions = {
        method: "GET",
        // body: formdata,
        redirect: "follow",
      };

      fetch(
        "https://moi.myclan.ng/v1/endpoints/blog/fetchAllBlogReleases",
        requestOptions
      )
        .then((response) => response.json())
        .then((result) => {
          let posts = result.data;
          let postTemplateArray = [];

          posts.forEach((post) => {
            if (
              post.release_title.trim().length > 1 &&
              post.release_text.trim().length > 1
              ) {
              // console.log(post);
              let postTemplate = `
                <article class="admin-article">
                <div>
                  <img src="${post.release_img || './images/Gov-Akeredolu.jpg'}" alt="${post.release_title}" />
                </div>
                <div>
                  <h2>${post.release_title}</h2>
                  <p>
                    ${post.release_text}
                  </p>
                  <small>10 hours ago</small>
                </div>
                <div class="flex mr-5">
                  <div class="action-container mr-1">
                    <a href="#">
                      <i class="fa-regular fa-pen-to-square"></i>
                      <span>Edit</span>
                    </a>
                  </div>
                  <div class="action-container">
                    <a href="#">
                      <i class="fa-solid fa-trash-can"></i>
                      <span>Delete</span>
                    </a>
                  </div>
                </div>
              </article>
              `;
              postTemplateArray.push(postTemplate);
            }
          });
          postTemplateArray = postTemplateArray.join("");

          postsContainer.innerHTML = postTemplateArray;
        })
        .catch((error) => console.log("error", error));
    </script>
  </body>
</html>
